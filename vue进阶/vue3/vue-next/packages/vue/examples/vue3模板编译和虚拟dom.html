<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        // vue3模板编译时，会利用vue-loader进行预编译，对编译好的template放入component中的render函数中，使vue轻量级并且运行速度更快
        // render函数会优先template ，如果template不是字符串会从$el中拿到宿主元素中的innerHTML作为template
        // template 会通过compiler模块返回一个字符串code，通过new function（code）返回一个render函数
        // compiler实际上执行的是baseCompiler
        //1.解析 baseparse将template解析为抽象语法树ast（js对象）
        //2.转换 transform解析属性,样式，指令等扩展ast树 平台扩展，静态标记
        //3.生成 generate将ast转换为渲染函数  对树的节点进行遍历，每遇到一个节点生成对应节点的js代码，将js代码用字符串的形式拼接出来

        //编译优化 
        //1.静态节点提升，将静态节点存储在内存当中，以后需要时直接从内存中取
        //2.补丁标记和动态属性记录 利用位运算计算节点动态类型和动态的属性 静态的略过 通过_openBlock()将动态的部分进行存储在patch的时候只进行动态的比较
        //3.缓存事件处理程序

        //新vnode结构
        // children既可以是数组也可以是文本
        // dynamicChildren:[] 记录动态子节点的属性和方法减少遍历操作
        // dynamicProps：null 记录动态属性
        // patchFlag:64 标注动态内容类型（二进制），使得有针对性的patch
        // shapeFlag:16 标记组件类型（二进制）
        // type：Symbol(Fragement) 表明节点类型如果是组件以对象形式表示 text/Fragement/Element节点用Symbol

        //在patchkeyvnode的diff时会先进行掐头，然后去尾，最后进行新增，删除和替换（乱序和vue2一样）
    </script>
</body>
</html>